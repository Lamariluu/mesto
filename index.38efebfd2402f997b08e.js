(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input-error",errorClass:"popup__input-error_visible",typeError:"popup__input_type_error"};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.item.link,this._name=t.item.name,this._cardId=t.item._id,this._ownerId=t.item.owner._id,this._userId=t.userInfo._id,this._templateSelector=n,this._handleCardClick=t.handleCardClick,this._handleTrashClick=t.handleTrashClick,this._handleLikeClick=t.handleLikeClick,this._likes=t.item.likes}var t,r;return t=e,(r=[{key:"createCard",value:function(){return this._element=this._getTemplate(),this._elementLike=this._element.querySelector(".element__like"),this._elementTrash=this._element.querySelector(".element__trash"),this._elementImg=this._element.querySelector(".element__photo"),this._elementTitle=this._element.querySelector(".element__title"),this._elementLikeCounter=this._element.querySelector(".element__like-counter"),this._elementLikeCounter.textContent=this._likes.length,this._removeTrash(),this._elementImg.src=this._link,this._elementImg.alt=this._name,this._elementTitle.textContent=this._name,this._setEventListeners(),this._likesUser(),this._element}},{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_like",value:function(){this._handleLikeClick(this._hasMyLike,this._cardId,this._showLikes.bind(this))}},{key:"_showLikes",value:function(){this._elementLike.classList.toggle("element__like_active"),this._hasMyLike?(this._elementLikeCounter.textContent=Number(this._elementLikeCounter.textContent)-1,this._hasMyLike=!1):(this._elementLikeCounter.textContent=Number(this._elementLikeCounter.textContent)+1,this._hasMyLike=!0)}},{key:"_trash",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._elementLike.addEventListener("click",(function(){e._like()})),this._elementTrash.addEventListener("click",(function(){e._handleTrashClick(e._trash.bind(e))})),this._elementImg.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"_addLike",value:function(){this._hasMyLike=!0,this._elementLike.classList.add("element__like_active")}},{key:"_likesUser",value:function(){var e=this;this._likes.some((function(t){return e._userId===t._id}))&&this._addLike()}},{key:"_removeTrash",value:function(){this._userId!==this._ownerId&&this._elementTrash.remove()}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}const u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=document.querySelector(n),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var l=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=o,this._items=r,this._container=document.querySelector(n),this.renderItems()}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"updateList",value:function(e){this._items=e,this.renderItems()}},{key:"renderItems",value:function(){var e=this;this._items.reverse().forEach((function(t){e._renderer(t)}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}var y=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(e){"Escape"===e.key&&i.close()},(r=p(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this),this._submit=this._popup.querySelector(".popup__save")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setLoading",value:function(){this._submit.textContent="Сохранение..."}},{key:"setGeneral",value:function(){this._submit.textContent="Сохранить"}},{key:"setEventListeners",value:function(){var e=this;this._buttonClose.addEventListener("mousedown",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._img=document.querySelector(".popup__img"),t._title=document.querySelector(".popup__img-caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this._img.alt=e,this._img.src=t,this._title.textContent=e,d(v(u.prototype),"open",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n,r=t.handleFormAdd;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormAdd=r,n._form=document.querySelector(e).querySelector(".popup__form"),n._inputs=document.querySelector(e).querySelectorAll(".popup__input"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputs.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){this._form.reset(),k(E(u.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormAdd(e._getInputValues())})),k(E(u.prototype),"setEventListeners",this).call(this)}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var C=function(){function e(t){var n=t.userNameSelector,r=t.userBioSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userBio=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,bio:this._userBio.textContent,_id:this._id}}},{key:"setUserInfo",value:function(e,t,n){this._userName.textContent=e,this._userBio.textContent=t,this._id=n}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(r);if(o){var n=U(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}(this,e)});function u(e,t){var n,r=t.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleSubmit=r.bind(R(n)),n._form=n._popup.querySelector(".popup__form"),n._save=n._popup.querySelector(".popup__save"),n}return t=u,(n=[{key:"open",value:function(e){q(U(u.prototype),"open",this).call(this),this._handleSubmit=e}},{key:"close",value:function(){q(U(u.prototype),"close",this).call(this),this._handleSubmit=void 0}},{key:"setEventListeners",value:function(){var e=this;q(U(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit()}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===x(o)?o:String(o)),r)}var o}const V=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"GET"}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"GET"}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"createItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"deleteItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{headers:this._headers,method:"PUT"}).then(this._checkResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{headers:this._headers,method:"DELETE"}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatar})}).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка в запросе: ".concat(e.status))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"66152526-e3a2-499d-83aa-0c2a001d63c8","Content-Type":"application/json"}});var N="#popup-add-element",D="#popup-change-profile",G="#popup-change-avatar",F=(document.querySelector("#popup-open-img"),document.querySelector(".profile__edit-button")),M=document.querySelector(".profile__add-button"),J=document.querySelector(".profile__edit-avatar"),H=(document.querySelector(".element__trash"),document.querySelector(".popup__close_edit"),document.querySelector(".popup__close_img"),document.querySelector(".popup__close_add"),document.querySelectorAll(".popup__close"),document.querySelector(".popup__form_edit"),document.querySelector(".popup__input_type_name")),z=document.querySelector(".popup__input_type_bio");document.querySelector(".popup__input_type_place-name"),document.querySelector(".popup__input_type_place-img"),document.querySelector(".popup__img"),document.querySelector(".popup__img-caption"),document.querySelector(".elements"),document.querySelector("#elements").content,document.querySelectorAll(".popup"),document.querySelector(".popup_big-img"),new u(e,D).enableValidation();var K=new u(e,N);K.enableValidation();var Q=new u(e,G);Q.enableValidation();var W=new b(".popup_big-img");W.setEventListeners();var X=new A("#popup-confirm",{handleSubmit:function(){}});X.setEventListeners();var Y=new C({userNameSelector:".profile__username",userBioSelector:".profile__description",userAvatarSelector:".profile__avatar"}),Z=new L(D,{handleFormAdd:function(e){Z.setLoading(),V.setUserInfo({name:e.username,about:e.userbio}).then((function(e){Y.setUserInfo(e.name,e.about,e._id),Z.close()})).catch((function(e){console.log(e)})).finally((function(){Z.setGeneral()}))}});Z.setEventListeners(),V.getUserInfo().then((function(e){Y.setUserInfo(e.name,e.about,e._id),Y.setUserAvatar(e.avatar),F.addEventListener("click",(function(){var e=Y.getUserInfo(),t=e.name,n=e.bio;H.value=t,z.value=n,Z.open()}));var t=function(e){return new r({item:e,handleCardClick:function(){W.open(e.name,e.link)},handleTrashClick:function(t){X.open((function(){X.setLoading(),V.deleteItem(e._id).then((function(e){console.log({res:e}),t(),X.close()})).catch((function(e){console.log({err:e})})).finally((function(){X.setGeneral()}))}))},handleLikeClick:function(e,t,n){e?V.deleteLike(t).then((function(){n()})).catch((function(e){console.log({err:e})})):V.addLike(t).then((function(){n()})).catch((function(e){console.log({err:e})}))},userInfo:Y.getUserInfo()},"#elements").createCard()},n=new l({items:[],renderer:function(e){var r=t(e);n.addItem(r)}},".elements"),o=new L(N,{handleFormAdd:function(e){o.setLoading(),V.createItem({link:e.link,name:e.name}).then((function(e){var r=t(e);n.addItem(r),o.close()})).catch((function(e){console.log({err:e})})).finally((function(){o.setGeneral()}))}});o.setEventListeners(),M.addEventListener("click",(function(){K.resetValidation(),o.open()})),V.getInitialCards().then((function(e){n.updateList(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));var $=new L(G,{handleFormAdd:function(e){$.setLoading(),V.setUserAvatar({avatar:e.avatar}).then((function(t){Y.setUserAvatar(e.avatar),$.close()})).catch((function(e){console.log(e)})).finally((function(){$.setGeneral()}))}});$.setEventListeners(),J.addEventListener("click",(function(){Q.resetValidation(),$.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBYVosWUFDZixHQUNKLElBRUZZLEVBQWEzQixvQkFFYlIsRUFBaUJySCxpQkFBaUIsU0FBUyxXQUN6QzBILEVBQWErQixrQkFDYkQsRUFBYVIsTUFDZixJQUVBZCxFQUFBQSxrQkFDRzlCLE1BQUssU0FBQ2lDLEdBQ0xnQixFQUFTSyxXQUFXckIsRUFDdEIsSUFDQ0UsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLEdBQ0osSUFDQ0QsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLElBR0YsSUFBTW1CLEVBQW9CLElBQUkxRixFQUFja0QsRUFBYSxDQUN2RGpELGNBQWUsU0FBQ3RILEdBQ2QrTSxFQUFrQjFCLGFBQ2xCQyxFQUFBQSxjQUFrQixDQUFFOUMsT0FBUXhJLEVBQUt3SSxTQUM5QmdCLE1BQUssU0FBQ2lDLEdBQ0wzSyxFQUFTbUwsY0FBY2pNLEVBQUt3SSxRQUM1QnVFLEVBQWtCNUcsT0FDcEIsSUFDQ3dGLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUNDRyxTQUFRLFdBQ1BnQixFQUFrQmYsWUFDcEIsR0FDSixJQUVGZSxFQUFrQjlCLG9CQUVsQlAsRUFBb0J0SCxpQkFBaUIsU0FBUyxXQUM1QzJILEVBQWdCOEIsa0JBQ2hCRSxFQUFrQlgsTUFDcEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1Gb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8v0YHQvtC30LTQsNC90LjQtSDQv9C10YDQtdC80LXQvdC90L7QuSDQtNC70Y8g0LzQsNGB0YHQuNCy0LAg0YEg0LrQsNGA0YLQvtGH0LrQsNC80LhcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbiAgfVxuXTtcblxuXG5cbi8v0YHQvtC30LTQsNC90LjQtSDQv9C10YDQtdC80LXQvdC90L7QuSDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INCy0YHQtdGFINGE0L7RgNC8XG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZScsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc2F2ZV9pbmFjdGl2ZScsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3JfdmlzaWJsZScsXG4gIHR5cGVFcnJvcjogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3Rvcikge1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLml0ZW0ubGluaztcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5pdGVtLm5hbWU7XG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5pdGVtLl9pZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5pdGVtLm93bmVyLl9pZDtcbiAgICB0aGlzLl91c2VySWQgPSBkYXRhLnVzZXJJbmZvLl9pZDtcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBkYXRhLmhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrID0gZGF0YS5oYW5kbGVUcmFzaENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGRhdGEuaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5pdGVtLmxpa2VzO1xuICB9O1xuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZWxlbWVudExpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZVwiKTtcbiAgICB0aGlzLl9lbGVtZW50VHJhc2ggPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdHJhc2hcIik7XG4gICAgdGhpcy5fZWxlbWVudEltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19waG90b1wiKTtcbiAgICB0aGlzLl9lbGVtZW50VGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGVcIik7XG4gICAgdGhpcy5fZWxlbWVudExpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtY291bnRlclwiKTtcbiAgICB0aGlzLl9lbGVtZW50TGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fcmVtb3ZlVHJhc2goKTtcbiAgICB0aGlzLl9lbGVtZW50SW1nLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudEltZy5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9saWtlc1VzZXIoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfTtcblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfTtcblxuICBfbGlrZSgpIHtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faGFzTXlMaWtlLCB0aGlzLl9jYXJkSWQsXG4gICAgICB0aGlzLl9zaG93TGlrZXMuYmluZCh0aGlzKSk7XG4gIH07XG5cbiAgX3Nob3dMaWtlcygpIHtcbiAgICB0aGlzLl9lbGVtZW50TGlrZS5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZV9hY3RpdmVcIilcbiAgICBpZiAodGhpcy5faGFzTXlMaWtlKSB7XG4gICAgICB0aGlzLl9lbGVtZW50TGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBOdW1iZXIodGhpcy5fZWxlbWVudExpa2VDb3VudGVyLnRleHRDb250ZW50KSAtIDFcbiAgICAgIHRoaXMuX2hhc015TGlrZSA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRMaWtlQ291bnRlci50ZXh0Q29udGVudCA9IE51bWJlcih0aGlzLl9lbGVtZW50TGlrZUNvdW50ZXIudGV4dENvbnRlbnQpICsgMVxuICAgICAgdGhpcy5faGFzTXlMaWtlID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIF90cmFzaCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50TGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9lbGVtZW50VHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrKHRoaXMuX3RyYXNoLmJpbmQodGhpcykpO1xuICAgIH0pO1xuICAgIHRoaXMuX2VsZW1lbnRJbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgfSk7XG4gIH07XG5cbiAgX2FkZExpa2UoKSB7XG4gICAgdGhpcy5faGFzTXlMaWtlID0gdHJ1ZVxuICAgIHRoaXMuX2VsZW1lbnRMaWtlLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19saWtlX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9saWtlc1VzZXIoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKHVzZXIpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl91c2VySWQgPT09IHVzZXIuX2lkO1xuICAgIH0pKSB7XG4gICAgICB0aGlzLl9hZGRMaWtlKCk7XG4gICAgfVxuICB9XG5cbiAgX3JlbW92ZVRyYXNoKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRUcmFzaC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cbn1cblxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1FbGVtZW50KTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQstGL0LLQvtC00LAg0L7RiNC40LHQutC4XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfTtcblxuICAvL9GE0YPQvdC60YbQuNGPINGD0LTQsNC70LXQvdC40Y8g0YLQtdC60YHRgtCwINC+0YjQuNCx0LrQuFxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfTtcblxuICAvL9GE0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNC90L7RgdGC0Lgg0L/QvtC70LXQuVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfTtcbiAgfTtcblxuICAvL9GE0YPQvdC60YbQuNGPINCy0YvRj9Cy0LvQtdC90LjRjyDQstCw0LvQuNC00L3QvtGB0YLQuCDRgyDQutCw0LbQtNC+0LPQviDQuNC90L/Rg9GC0LBcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH07XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQuNC30LzQtdC90LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YLQuCDQvtGCINCy0LDQu9C40LTQvdC+0YHRgtC4INC/0L7Qu9C10LlcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH07XG4gIH07XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LLRgdC10YUg0LjQvdC/0YPRgtC+0LJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvL9GD0LTQsNC70LXQvdC40LUg0YHQvtC+0LHRidC10L3QuNGPINCy0LDQu9C40LTQsNGG0LjQuFxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9O1xuXG4gIC8v0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIHRoaXMucmVuZGVySXRlbXMoKVxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICB1cGRhdGVMaXN0KGl0ZW1zKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtc1xuICAgIHRoaXMucmVuZGVySXRlbXMoKVxuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9O1xufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3N1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZScpO1xuICB9XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIC8v0YTRg9C90LrRhtC40Y8g0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0L7QslxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyINC/0YDQuCDQvdCw0LbQsNGC0LjQuCBFc2NcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICAvL9C40LfQvNC10L3QtdC90LjQtSDQutC90L7Qv9C60Lgg0L/RgNC4INGB0L7RhdGA0LDQvdC10L3QuNC4INC00LDQvdC90YvRhVxuICBzZXRMb2FkaW5nKCkge1xuICAgIHRoaXMuX3N1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gIH1cblxuICBzZXRHZW5lcmFsKCkge1xuICAgIHRoaXMuX3N1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnO1xuICB9XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyINC/0YDQuCDQutC70LjQutC1INC90LAg0LjQutC+0L3QutGDINC30LDQutGA0YvRgtC40Y8g0Lggb3ZlcmxheVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9KTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZycpO1xuICAgIHRoaXMuX3RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWctY2FwdGlvbicpO1xuICB9XG5cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5faW1nLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1nLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybUFkZCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybUFkZCA9IGhhbmRsZUZvcm1BZGQ7XG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcikucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1BZGQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJCaW9TZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckJpb1NlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgYmlvOiB0aGlzLl91c2VyQmlvLnRleHRDb250ZW50LFxuICAgICAgX2lkOiB0aGlzLl9pZCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYmlvLCBpZCkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VyQmlvLnRleHRDb250ZW50ID0gYmlvO1xuICAgIHRoaXMuX2lkID0gaWRcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm1Gb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX3NhdmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUnKTtcbiAgfVxuXG4gIG9wZW4oaGFuZGxlU3VibWl0KSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVyc1xuICB9XG5cbiAgLy/Qt9Cw0LPRgNGD0LfQutCwINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8v0L/QvtC70YPRh9C40YLRjCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy/RgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5hYm91dCxcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8v0LTQvtCx0LDQstC40YLRjCDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YNcbiAgY3JlYXRlSXRlbShkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGRhdGEubGluayxcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8v0YPQtNCw0LvQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xuICBkZWxldGVJdGVtKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8v0L/QvtGB0YLQsNCy0LjRgtGMINC70LDQudC6XG4gIGFkZExpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy/Rg9C00LDQu9C40YLRjCDQu9Cw0LnQulxuICBkZWxldGVMaWtlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxuICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgLy/Qv9GA0Lgg0L7RiNC40LHQutC1INC+0YLQutC70L7QvdGP0LXQvCBQcm9taXNlXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAg0LIg0LfQsNC/0YDQvtGB0LU6ICR7cmVzLnN0YXR1c31gKVxufVxufVxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzY2MTUyNTI2LWUzYTItNDk5ZC04M2FhLTBjMmEwMDFkNjNjOCcsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpXG4iLCIvL9C40LzQv9C+0YDRgiDQutC70LDRgdGB0L7QslxuaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IFBvcHVwQ29uZmlybUZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1Gb3JtLmpzJztcbmltcG9ydCAnLi9pbmRleC5jc3MnXG5pbXBvcnQgYXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcblxuLy/RgdC+0LfQtNCw0L3QuNC1INC/0LXRgNC10LzQtdC90L3Ri9GFINC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyXG5jb25zdCBwb3B1cEFkZCA9ICcjcG9wdXAtYWRkLWVsZW1lbnQnO1xuY29uc3QgcG9wdXBCaWdJbWFnZSA9ICcucG9wdXBfYmlnLWltZyc7XG5jb25zdCBwb3B1cFByb2ZpbGUgPSAnI3BvcHVwLWNoYW5nZS1wcm9maWxlJztcbmNvbnN0IHBvcHVwQXZhdGFyID0gJyNwb3B1cC1jaGFuZ2UtYXZhdGFyJztcbmNvbnN0IHBvcHVwT3BlbkltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cC1vcGVuLWltZycpO1xuY29uc3QgcHJvZmlsZUJ1dHRvbkNoYW5nZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgcHJvZmlsZUJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5jb25zdCBwcm9maWxlQnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYXZhdGFyJyk7XG5jb25zdCB0cmFzaEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaCcpO1xuLy/RgdC+0LfQtNCw0L3QuNC1INC/0LXRgNC10LzQtdC90L3Ri9GFINC00LvRjyDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyXG5jb25zdCBwb3B1cENsb3NlUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2VfZWRpdCcpO1xuY29uc3QgcG9wdXBDbG9zZUltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2VfaW1nJyk7XG5jb25zdCBwb3B1cENsb3NlQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZV9hZGQnKTtcbmNvbnN0IHBvcHVwQ2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fY2xvc2VcIik7XG4vL9GB0L7Qt9C00LDQvdC40LUg0L/QtdGA0LXQvNC10L3QvdGL0YUg0LTQu9GPINGB0L7RhdGA0LDQvdC10L3QuNGPINC00LDQvdC90YvRhSDQv9GA0L7RhNC40LvRj1xuY29uc3QgcG9wdXBGb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV9lZGl0Jyk7XG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xuY29uc3QgaW5wdXRCaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYmlvJyk7XG5jb25zdCBwcm9maWxlVXNlcm5hbWUgPSAnLnByb2ZpbGVfX3VzZXJuYW1lJztcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nO1xuY29uc3QgcHJvZmlsZUF2YXRhciA9ICcucHJvZmlsZV9fYXZhdGFyJztcbmNvbnN0IHBvcHVwQ29uZmlybSA9ICcjcG9wdXAtY29uZmlybSc7XG4vL9GB0L7Qt9C00LDQvdC40LUg0L/QtdGA0LXQvNC10L3QvdGL0YUg0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstGL0YUg0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgaW5wdXRQbGFjZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfcGxhY2UtbmFtZScpO1xuY29uc3QgaW5wdXRQbGFjZUltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9wbGFjZS1pbWcnKTtcbi8v0YHQvtC30LTQsNC90LjQtSDQv9C10YDQtdC80LXQvdC90YvRhSDQtNC70Y8g0L/RgNC+0YHQvNC+0YLRgNCwINGE0L7RgtC+0LPRgNCw0YTQuNC5XG5jb25zdCBwb3B1cEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nJyk7XG5jb25zdCBwb3B1cEltZ0NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZy1jYXB0aW9uJyk7XG5jb25zdCBzZWN0aW9uRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKTtcbmNvbnN0IGVsZW1lbnRzVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWxlbWVudHMnKS5jb250ZW50O1xuY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKTtcbmNvbnN0IHBvcHVwQmlnSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2JpZy1pbWcnKTtcblxuLy/Qv9C+0LTQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuFxuY29uc3QgZm9ybVZhbGlkUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwUHJvZmlsZSk7XG5mb3JtVmFsaWRQcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgZm9ybVZhbGlkQWRkID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBBZGQpO1xuZm9ybVZhbGlkQWRkLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgZm9ybVZhbGlkQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBBdmF0YXIpO1xuZm9ybVZhbGlkQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBCaWdJbWFnZSk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbmNvbnN0IHBvcHVwQ29uZmlybVJlbW92ZSA9IG5ldyBQb3B1cENvbmZpcm1Gb3JtKHBvcHVwQ29uZmlybSwge1xuICBoYW5kbGVTdWJtaXQ6ICgpID0+IHtcblxuICB9XG59KTtcbnBvcHVwQ29uZmlybVJlbW92ZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgdXNlck5hbWVTZWxlY3RvcjogcHJvZmlsZVVzZXJuYW1lLCB1c2VyQmlvU2VsZWN0b3I6IHByb2ZpbGVEZXNjcmlwdGlvbiwgdXNlckF2YXRhclNlbGVjdG9yOiBwcm9maWxlQXZhdGFyIH0pO1xuXG4vL9GA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0L/RgNC+0YTQuNC70Y9cbmNvbnN0IHBvcHVwQ2hhbmdlUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwUHJvZmlsZSwge1xuICBoYW5kbGVGb3JtQWRkOiAocHJvZmlsZURhdGEpID0+IHtcbiAgICBwb3B1cENoYW5nZVByb2ZpbGUuc2V0TG9hZGluZygpO1xuICAgIGFwaS5zZXRVc2VySW5mbyh7IG5hbWU6IHByb2ZpbGVEYXRhLnVzZXJuYW1lLCBhYm91dDogcHJvZmlsZURhdGEudXNlcmJpbyB9KVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQubmFtZSwgcmVzdWx0LmFib3V0LCByZXN1bHQuX2lkKTtcbiAgICAgICAgcG9wdXBDaGFuZ2VQcm9maWxlLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwQ2hhbmdlUHJvZmlsZS5zZXRHZW5lcmFsKCk7XG4gICAgICB9KVxuICB9XG59KTtcbnBvcHVwQ2hhbmdlUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9C30LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INGBINGB0LXRgNCy0LXRgNCwXG5hcGkuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0Lm5hbWUsIHJlc3VsdC5hYm91dCwgcmVzdWx0Ll9pZCk7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXN1bHQuYXZhdGFyKTtcbiAgICBwcm9maWxlQnV0dG9uQ2hhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBuYW1lLCBiaW8gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICAgICAgaW5wdXRCaW8udmFsdWUgPSBiaW87XG4gICAgICBwb3B1cENoYW5nZVByb2ZpbGUub3BlbigpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgICAgICBpdGVtOiBkYXRhLCBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEubmFtZSwgZGF0YS5saW5rKTtcbiAgICAgICAgfSwgaGFuZGxlVHJhc2hDbGljazogKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgcG9wdXBDb25maXJtUmVtb3ZlLm9wZW4oKCkgPT4ge1xuICAgICAgICAgICAgcG9wdXBDb25maXJtUmVtb3ZlLnNldExvYWRpbmcoKTtcbiAgICAgICAgICAgIGFwaS5kZWxldGVJdGVtKGRhdGEuX2lkKVxuICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coeyByZXMgfSlcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICAgICAgcG9wdXBDb25maXJtUmVtb3ZlLmNsb3NlKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coeyBlcnIgfSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVwQ29uZmlybVJlbW92ZS5zZXRHZW5lcmFsKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUxpa2VDbGljazogKGhhc015TGlrZSwgY2FyZElkLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGlmIChoYXNNeUxpa2UpIHtcbiAgICAgICAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmRJZClcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh7IGVyciB9KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcGkuYWRkTGlrZShjYXJkSWQpXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coeyBlcnIgfSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHVzZXJJbmZvOiB1c2VySW5mby5nZXRVc2VySW5mbygpLFxuICAgICAgfSwgJyNlbGVtZW50cycpO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9O1xuXG4gICAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICBpdGVtczogW10sXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XG4gICAgICB9XG4gICAgfSwgJy5lbGVtZW50cycpO1xuXG4gICAgLy/QtNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcbiAgICBjb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZCwge1xuICAgICAgaGFuZGxlRm9ybUFkZDogKGRhdGEpID0+IHtcbiAgICAgICAgcG9wdXBBZGRDYXJkLnNldExvYWRpbmcoKTtcbiAgICAgICAgYXBpLmNyZWF0ZUl0ZW0oeyBsaW5rOiBkYXRhLmxpbmssIG5hbWU6IGRhdGEubmFtZSB9KVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKHJlc3VsdCk7XG4gICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpO1xuICAgICAgICAgICAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coeyBlcnIgfSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHBvcHVwQWRkQ2FyZC5zZXRHZW5lcmFsKCk7XG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHByb2ZpbGVCdXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBmb3JtVmFsaWRBZGQucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgICBwb3B1cEFkZENhcmQub3BlbigpO1xuICAgIH0pO1xuXG4gICAgYXBpLmdldEluaXRpYWxDYXJkcygpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNhcmRMaXN0LnVwZGF0ZUxpc3QocmVzdWx0KVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuLy/QuNC30LzQtdC90LjRgtGMINCw0LLQsNGC0LDRgFxuY29uc3QgcG9wdXBDaGFuZ2VBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEF2YXRhciwge1xuICBoYW5kbGVGb3JtQWRkOiAoZGF0YSkgPT4ge1xuICAgIHBvcHVwQ2hhbmdlQXZhdGFyLnNldExvYWRpbmcoKTtcbiAgICBhcGkuc2V0VXNlckF2YXRhcih7IGF2YXRhcjogZGF0YS5hdmF0YXIgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgICAgIHBvcHVwQ2hhbmdlQXZhdGFyLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwQ2hhbmdlQXZhdGFyLnNldEdlbmVyYWwoKTtcbiAgICAgIH0pXG4gIH1cbn0pO1xucG9wdXBDaGFuZ2VBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkQXZhdGFyLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cENoYW5nZUF2YXRhci5vcGVuKCk7XG59KTtcbiJdLCJuYW1lcyI6WyJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ0eXBlRXJyb3IiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2xpbmsiLCJpdGVtIiwibGluayIsIl9uYW1lIiwibmFtZSIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXJJZCIsInVzZXJJbmZvIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRyYXNoQ2xpY2siLCJoYW5kbGVUcmFzaENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsImhhbmRsZUxpa2VDbGljayIsIl9saWtlcyIsImxpa2VzIiwia2V5IiwidmFsdWUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9lbGVtZW50TGlrZSIsInF1ZXJ5U2VsZWN0b3IiLCJfZWxlbWVudFRyYXNoIiwiX2VsZW1lbnRJbWciLCJfZWxlbWVudFRpdGxlIiwiX2VsZW1lbnRMaWtlQ291bnRlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3JlbW92ZVRyYXNoIiwic3JjIiwiYWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VzVXNlciIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9oYXNNeUxpa2UiLCJfc2hvd0xpa2VzIiwiYmluZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIk51bWJlciIsInJlbW92ZSIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlIiwiX3RyYXNoIiwiYWRkIiwiX3RoaXMyIiwic29tZSIsInVzZXIiLCJfYWRkTGlrZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2l0ZW1zIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZXZlcnNlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0IiwiY2xvc2UiLCJfcG9wdXAiLCJfYnV0dG9uQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfc3VibWl0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX2ltZyIsIl90aXRsZSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybUFkZCIsIl9oYW5kbGVGb3JtQWRkIiwiX2Zvcm0iLCJfaW5wdXRzIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInJlc2V0IiwiX3RoaXMzIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VyQmlvU2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckJpbyIsIl91c2VyQXZhdGFyIiwiYmlvIiwiYXZhdGFyIiwiUG9wdXBDb25maXJtRm9ybSIsImhhbmRsZVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXQiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX3NhdmUiLCJ1bmRlZmluZWQiLCJldmVudCIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYXV0aG9yaXphdGlvbiIsInBvcHVwQWRkIiwicG9wdXBQcm9maWxlIiwicG9wdXBBdmF0YXIiLCJwcm9maWxlQnV0dG9uQ2hhbmdlIiwicHJvZmlsZUJ1dHRvbkFkZCIsInByb2ZpbGVCdXR0b25BdmF0YXIiLCJpbnB1dE5hbWUiLCJpbnB1dEJpbyIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtVmFsaWRBZGQiLCJmb3JtVmFsaWRBdmF0YXIiLCJwb3B1cFdpdGhJbWFnZSIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBDb25maXJtUmVtb3ZlIiwicG9wdXBDaGFuZ2VQcm9maWxlIiwicHJvZmlsZURhdGEiLCJzZXRMb2FkaW5nIiwiYXBpIiwidXNlcm5hbWUiLCJ1c2VyYmlvIiwicmVzdWx0Iiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5Iiwic2V0R2VuZXJhbCIsInNldFVzZXJBdmF0YXIiLCJfdXNlckluZm8kZ2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsIm9wZW4iLCJjcmVhdGVDYXJkIiwiY2FsbGJhY2siLCJoYXNNeUxpa2UiLCJjYXJkSWQiLCJjYXJkTGlzdCIsIm5ld0NhcmQiLCJhZGRJdGVtIiwicG9wdXBBZGRDYXJkIiwicmVzZXRWYWxpZGF0aW9uIiwidXBkYXRlTGlzdCIsInBvcHVwQ2hhbmdlQXZhdGFyIl0sInNvdXJjZVJvb3QiOiIifQ==