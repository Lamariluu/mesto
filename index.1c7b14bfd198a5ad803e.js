(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input-error",errorClass:"popup__input-error_visible",typeError:"popup__input_type_error"};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}const r=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,r;return t=e,(r=[{key:"getInitialCards",value:function(){return console.log("getInitialCards"),fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"createItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{headers:this._headers,method:"PUT"}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"setUserAvatar",value:function(e){return console.log({data:e}),fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"66152526-e3a2-499d-83aa-0c2a001d63c8","Content-Type":"application/json"}});function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.item.link,this._name=t.item.name,this._cardId=t.item._id,this._ownerId=t.item.owner._id,this._userId=t.userInfo._id,this._templateSelector=n,this._handleCardClick=t.handleCardClick,this._handleTrashClick=t.handleTrashClick,this._likes=t.item.likes}var t,n;return t=e,(n=[{key:"createCard",value:function(){return this._element=this._getTemplate(),this._elementLike=this._element.querySelector(".element__like"),this._elementTrash=this._element.querySelector(".element__trash"),this._elementImg=this._element.querySelector(".element__photo"),this._elementTitle=this._element.querySelector(".element__title"),this._elementLikeCounter=this._element.querySelector(".element__like-counter"),this._elementLikeCounter.textContent=this._likes.length,this._removeTrash(),this._elementImg.src=this._link,this._elementImg.alt=this._name,this._elementTitle.textContent=this._name,this._setEventListeners(),this._likesUser(),this._element}},{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_like",value:function(){this._elementLike.classList.toggle("element__like_active"),this._hasMyLike?r.deleteLike(this._cardId):r.addLike(this._cardId)}},{key:"_trash",value:function(){this._element.remove(),this._element=null,r.deleteItem(this._cardId)}},{key:"_setEventListeners",value:function(){var e=this;this._elementLike.addEventListener("click",(function(){e._like()})),this._elementTrash.addEventListener("click",(function(){e._handleTrashClick(e._trash.bind(e))})),this._elementImg.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"_addLike",value:function(){this._hasMyLike=!0,this._elementLike.classList.add("element__like_active")}},{key:"_likesUser",value:function(){var e=this;this._likes.some((function(t){return e._userId===t._id}))&&this._addLike()}},{key:"_removeTrash",value:function(){this._userId!==this._ownerId&&this._elementTrash.remove()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}const l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=document.querySelector(n),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log({items:r}),this._renderer=o,this._items=r,this._container=document.querySelector(n),this.renderItems()}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"updateList",value:function(e){this._items=e,this.renderItems()}},{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}var d=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(e){"Escape"===e.key&&i.close()},(r=h(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._buttonClose.addEventListener("mousedown",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._img=document.querySelector(".popup__img"),t._title=document.querySelector(".popup__img-caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this._img.alt=e,this._img.src=t,this._title.textContent=e,b(g(u.prototype),"open",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n,r=t.handleFormAdd;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormAdd=r,n._form=document.querySelector(e).querySelector(".popup__form"),n._inputs=document.querySelector(e).querySelectorAll(".popup__input"),n._submit=document.querySelector(e).querySelector(".popup__save"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputs.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){this._form.reset(),j(O(u.prototype),"close",this).call(this)}},{key:"setLoading",value:function(){console.log(this._submit,"submit"),this._submit.textContent="Сохранение..."}},{key:"setGeneral",value:function(){this._submit.textContent="Сохранить"}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormAdd(e._getInputValues())})),j(O(u.prototype),"setEventListeners",this).call(this)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}var q=function(){function e(t){var n=t.userNameSelector,r=t.userBioSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userBio=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,bio:this._userBio.textContent,_id:this._id}}},{key:"setUserInfo",value:function(e,t,n,r){this._userName.textContent=e,this._userBio.textContent=t,this.setUserAvatar(n),this._id=r}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},R.apply(this,arguments)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(this,e)});function u(e,t){var n,r=t.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleSubmit=r.bind(B(n)),n._form=document.querySelector(e).querySelector(".popup__form"),n._save=document.querySelector(e).querySelector(".popup__save"),n}return t=u,(n=[{key:"open",value:function(e){R(x(u.prototype),"open",this).call(this),this._handleSubmit=e}},{key:"close",value:function(){R(x(u.prototype),"close",this).call(this),this._handleSubmit=void 0}},{key:"setEventListeners",value:function(){var e=this;R(x(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(),R(x(u.prototype),"close",e).call(e)}))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(d),D="#popup-add-element",N="#popup-change-profile",F="#popup-change-avatar",G=(document.querySelector("#popup-open-img"),document.querySelector(".profile__edit-button")),J=document.querySelector(".profile__add-button"),M=document.querySelector(".profile__edit-avatar"),H=(document.querySelector(".element__trash"),document.querySelector(".popup__close_edit"),document.querySelector(".popup__close_img"),document.querySelector(".popup__close_add"),document.querySelectorAll(".popup__close"),document.querySelector(".popup__form_edit"),document.querySelector(".popup__input_type_name")),z=document.querySelector(".popup__input_type_bio");document.querySelector(".popup__input_type_place-name"),document.querySelector(".popup__input_type_place-img"),document.querySelector(".popup__img"),document.querySelector(".popup__img-caption"),document.querySelector(".elements"),document.querySelector("#elements").content,document.querySelectorAll(".popup"),document.querySelector(".popup_big-img"),new l(e,N).enableValidation();var K=new l(e,D);K.enableValidation();var Q=new l(e,F);Q.enableValidation();var W=new k(".popup_big-img");W.setEventListeners();var X=new V("#popup-confirm",{handleSubmit:function(){}});X.setEventListeners();var Y=new q({userNameSelector:".profile__username",userBioSelector:".profile__description",userAvatarSelector:".profile__avatar"}),Z=new L(N,{handleFormAdd:function(e){Z.setLoading(),r.setUserInfo({name:e.username,about:e.userbio}).then((function(e){Y.setUserInfo(e.name,e.about),Z.close()})).catch((function(e){console.log(e)})).finally((function(){Z.setGeneral()}))}});Z.setEventListeners(),r.getUserInfo().then((function(e){Y.setUserInfo(e.name,e.about,e.avatar,e._id),G.addEventListener("click",(function(){var e=Y.getUserInfo(),t=e.name,n=e.bio;H.value=t,z.value=n,Z.open()}));var t=function(e){return new u({item:e,handleCardClick:function(){W.open(e.name,e.link)},handleTrashClick:function(e){X.open(e)},handleLikeClick:function(e){},userInfo:Y.getUserInfo()},"#elements").createCard()},n=new p({items:[],renderer:function(e){var r=t(e);n.addItem(r)}},".elements"),o=new L(D,{handleFormAdd:function(e){o.setLoading(),r.createItem({link:e.link,name:e.name}).then((function(e){console.log({result:e});var r=t(e);n.addItem(r),o.close()})).catch((function(e){console.log({err:e})})).finally((function(){o.setGeneral()}))}});o.setEventListeners(),J.addEventListener("click",(function(){K.resetValidation(),o.open()})),r.getInitialCards().then((function(e){n.updateList(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));var $=new L(F,{handleFormAdd:function(e){$.setLoading(),r.setUserAvatar({avatar:e.avatar}).then((function(t){Y.setUserAvatar(e.avatar),$.close()})).catch((function(e){console.log(e)})).finally((function(){$.setGeneral()}))}});$.setEventListeners(),M.addEventListener("click",(function(){Q.resetValidation(),$.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWF0QixvQkFFYlIsRUFBaUI5RixpQkFBaUIsU0FBUyxXQUN6Q21HLEVBQWEwQixrQkFDYkQsRUFBYVAsTUFDZixJQUVBeEgsRUFBQUEsa0JBQ0d4RCxNQUFLLFNBQUN3SyxHQUNMWSxFQUFTSyxXQUFXakIsRUFDdEIsSUFDQ0UsT0FBTSxTQUFDQyxHQUNOaEwsUUFBUUMsSUFBSStLLEVBQ2QsR0FDSixJQUNDRCxPQUFNLFNBQUNDLEdBQ05oTCxRQUFRQyxJQUFJK0ssRUFDZCxJQUdGLElBQU1lLEVBQW9CLElBQUlqRSxFQUFjOEIsRUFBYSxDQUN2RDdCLGNBQWUsU0FBQ25ILEdBQ2RtTCxFQUFrQnJCLGFBQ2xCN0csRUFBQUEsY0FBa0IsQ0FBRXpDLE9BQVFSLEVBQUtRLFNBQzlCZixNQUFLLFNBQUN3SyxHQUNMN0ksRUFBU2tILGNBQWN0SSxFQUFLUSxRQUM1QjJLLEVBQWtCbEYsT0FDcEIsSUFDQ2tFLE9BQU0sU0FBQ0MsR0FDTmhMLFFBQVFDLElBQUkrSyxFQUNkLElBQ0NDLFNBQVEsV0FDUGMsRUFBa0JiLFlBQ3BCLEdBQ0osSUFFRmEsRUFBa0J6QixvQkFFbEJQLEVBQW9CL0YsaUJBQWlCLFNBQVMsV0FDNUNvRyxFQUFnQnlCLGtCQUNoQkUsRUFBa0JWLE1BQ3BCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL9GB0L7Qt9C00LDQvdC40LUg0L/QtdGA0LXQvNC10L3QvdC+0Lkg0LTQu9GPINC80LDRgdGB0LjQstCwINGBINC60LDRgNGC0L7Rh9C60LDQvNC4XG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gIH1cbl07XG5cblxuXG4vL9GB0L7Qt9C00LDQvdC40LUg0L/QtdGA0LXQvNC10L3QvdC+0Lkg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDQstGB0LXRhSDRhNC+0YDQvFxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmUnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVfaW5hY3RpdmUnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX3Zpc2libGUnLFxuICB0eXBlRXJyb3I6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG59O1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmxcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzXG4gIH1cblxuICAvL9C30LDQs9GA0YPQt9C60LAg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsFxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgY29uc29sZS5sb2coJ2dldEluaXRpYWxDYXJkcycpXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICAvL9C/0L7Qu9GD0YfQuNGC0Ywg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy/RgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5hYm91dCxcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy/QtNC+0LHQsNCy0LjRgtGMINC90L7QstGD0Y4g0LrQsNGA0YLQvtGH0LrRg1xuICBjcmVhdGVJdGVtKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICAvL9GD0LTQsNC70LjRgtGMINC60LDRgNGC0L7Rh9C60YNcbiAgZGVsZXRlSXRlbShpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8v0L/QvtGB0YLQsNCy0LjRgtGMINC70LDQudC6XG4gIGFkZExpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICAvL9GD0LTQsNC70LjRgtGMINC70LDQudC6XG4gIGRlbGV0ZUxpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICBjb25zb2xlLmxvZyh7IGRhdGEgfSlcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MCcsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnNjYxNTI1MjYtZTNhMi00OTlkLTgzYWEtMGMyYTAwMWQ2M2M4JyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGlcbiIsImltcG9ydCBhcGkgZnJvbSBcIi4vQXBpXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbGluayA9IGRhdGEuaXRlbS5saW5rO1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLml0ZW0ubmFtZTtcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLml0ZW0uX2lkO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLml0ZW0ub3duZXIuX2lkO1xuICAgIHRoaXMuX3VzZXJJZCA9IGRhdGEudXNlckluZm8uX2lkO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGRhdGEuaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sgPSBkYXRhLmhhbmRsZVRyYXNoQ2xpY2s7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLml0ZW0ubGlrZXM7XG4gIH07XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9lbGVtZW50TGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlXCIpO1xuICAgIHRoaXMuX2VsZW1lbnRUcmFzaCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaFwiKTtcbiAgICB0aGlzLl9lbGVtZW50SW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3Bob3RvXCIpO1xuICAgIHRoaXMuX2VsZW1lbnRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKTtcbiAgICB0aGlzLl9lbGVtZW50TGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudGVyXCIpO1xuICAgIHRoaXMuX2VsZW1lbnRMaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9yZW1vdmVUcmFzaCgpO1xuICAgIHRoaXMuX2VsZW1lbnRJbWcuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50SW1nLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2xpa2VzVXNlcigpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9O1xuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9O1xuXG4gIF9saWtlKCkge1xuICAgIHRoaXMuX2VsZW1lbnRMaWtlLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlX2FjdGl2ZVwiKTtcblxuICAgIGlmICh0aGlzLl9oYXNNeUxpa2UpIHtcbiAgICAgIGFwaS5kZWxldGVMaWtlKHRoaXMuX2NhcmRJZClcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLmFkZExpa2UodGhpcy5fY2FyZElkKVxuICAgIH1cbiAgfTtcblxuICBfdHJhc2goKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICBhcGkuZGVsZXRlSXRlbSh0aGlzLl9jYXJkSWQpO1xuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50TGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9lbGVtZW50VHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrKHRoaXMuX3RyYXNoLmJpbmQodGhpcykpO1xuICAgIH0pO1xuICAgIHRoaXMuX2VsZW1lbnRJbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgfSk7XG4gIH07XG5cbiAgX2FkZExpa2UoKSB7XG4gICAgdGhpcy5faGFzTXlMaWtlID0gdHJ1ZVxuICAgIHRoaXMuX2VsZW1lbnRMaWtlLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19saWtlX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9saWtlc1VzZXIoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKHVzZXIpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl91c2VySWQgPT09IHVzZXIuX2lkO1xuICAgIH0pKSB7XG4gICAgICB0aGlzLl9hZGRMaWtlKCk7XG4gICAgfVxuICB9XG5cbiAgX3JlbW92ZVRyYXNoKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRUcmFzaC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cbn1cblxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1FbGVtZW50KTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQstGL0LLQvtC00LAg0L7RiNC40LHQutC4XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfTtcblxuICAvL9GE0YPQvdC60YbQuNGPINGD0LTQsNC70LXQvdC40Y8g0YLQtdC60YHRgtCwINC+0YjQuNCx0LrQuFxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfTtcblxuICAvL9GE0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNC90L7RgdGC0Lgg0L/QvtC70LXQuVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfTtcbiAgfTtcblxuICAvL9GE0YPQvdC60YbQuNGPINCy0YvRj9Cy0LvQtdC90LjRjyDQstCw0LvQuNC00L3QvtGB0YLQuCDRgyDQutCw0LbQtNC+0LPQviDQuNC90L/Rg9GC0LBcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH07XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQuNC30LzQtdC90LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YLQuCDQvtGCINCy0LDQu9C40LTQvdC+0YHRgtC4INC/0L7Qu9C10LlcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH07XG4gIH07XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LLRgdC10YUg0LjQvdC/0YPRgtC+0LJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvL9GD0LTQsNC70LXQvdC40LUg0YHQvtC+0LHRidC10L3QuNGPINCy0LDQu9C40LTQsNGG0LjQuFxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9O1xuXG4gIC8v0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgY29uc29sZS5sb2coeyBpdGVtcyB9KVxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB0aGlzLnJlbmRlckl0ZW1zKClcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgdXBkYXRlTGlzdChpdGVtcykge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXNcbiAgICB0aGlzLnJlbmRlckl0ZW1zKClcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9O1xufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIC8v0YTRg9C90LrRhtC40Y8g0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0L7QslxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyINC/0YDQuCDQvdCw0LbQsNGC0LjQuCBFc2NcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICAvL9GE0YPQvdC60YbQuNGPINC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LIg0L/RgNC4INC60LvQuNC60LUg0L3QsCDQuNC60L7QvdC60YMg0LfQsNC60YDRi9GC0LjRjyDQuCBvdmVybGF5XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nJyk7XG4gICAgdGhpcy5fdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZy1jYXB0aW9uJyk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9pbWcuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9pbWcuc3JjID0gbGluaztcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBoYW5kbGVGb3JtQWRkIH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtQWRkID0gaGFuZGxlRm9ybUFkZDtcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9zdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZScpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHNldExvYWRpbmcoKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5fc3VibWl0LCAnc3VibWl0JylcbiAgICB0aGlzLl9zdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICB9XG5cbiAgc2V0R2VuZXJhbCgpIHtcbiAgICB0aGlzLl9zdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtQWRkKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VyQmlvU2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJCaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJCaW9TZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGJpbzogdGhpcy5fdXNlckJpby50ZXh0Q29udGVudCxcbiAgICAgIF9pZDogdGhpcy5faWQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGJpbywgYXZhdGFyLCBpZCkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VyQmlvLnRleHRDb250ZW50ID0gYmlvO1xuICAgIHRoaXMuc2V0VXNlckF2YXRhcihhdmF0YXIpO1xuICAgIHRoaXMuX2lkID0gaWRcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiOyAvL9C40LzQv9C+0YDRgtC40YDRg9C10Lwg0LrQu9Cw0YHRgSBQb3B1cFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm1Gb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcikucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5fc2F2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcikucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlJyk7XG4gIH1cblxuICBvcGVuKGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xuICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG5cbn1cbiIsIi8v0LjQvNC/0L7RgNGCINC60LvQsNGB0YHQvtCyXG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgUG9wdXBDb25maXJtRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybUZvcm0uanMnO1xuaW1wb3J0ICcuL2luZGV4LmNzcydcbmltcG9ydCBhcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuXG4vL9GB0L7Qt9C00LDQvdC40LUg0L/QtdGA0LXQvNC10L3QvdGL0YUg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LJcbmNvbnN0IHBvcHVwQWRkID0gJyNwb3B1cC1hZGQtZWxlbWVudCc7XG5jb25zdCBwb3B1cEJpZ0ltYWdlID0gJy5wb3B1cF9iaWctaW1nJztcbmNvbnN0IHBvcHVwUHJvZmlsZSA9ICcjcG9wdXAtY2hhbmdlLXByb2ZpbGUnO1xuY29uc3QgcG9wdXBBdmF0YXIgPSAnI3BvcHVwLWNoYW5nZS1hdmF0YXInO1xuY29uc3QgcG9wdXBPcGVuSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwLW9wZW4taW1nJyk7XG5jb25zdCBwcm9maWxlQnV0dG9uQ2hhbmdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5jb25zdCBwcm9maWxlQnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmNvbnN0IHByb2ZpbGVCdXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXInKTtcbmNvbnN0IHRyYXNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RyYXNoJyk7XG4vL9GB0L7Qt9C00LDQvdC40LUg0L/QtdGA0LXQvNC10L3QvdGL0YUg0LTQu9GPINC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LJcbmNvbnN0IHBvcHVwQ2xvc2VQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZV9lZGl0Jyk7XG5jb25zdCBwb3B1cENsb3NlSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZV9pbWcnKTtcbmNvbnN0IHBvcHVwQ2xvc2VBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlX2FkZCcpO1xuY29uc3QgcG9wdXBDbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19jbG9zZVwiKTtcbi8v0YHQvtC30LTQsNC90LjQtSDQv9C10YDQtdC80LXQvdC90YvRhSDQtNC70Y8g0YHQvtGF0YDQsNC90LXQvdC40Y8g0LTQsNC90L3Ri9GFINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwb3B1cEZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX2VkaXQnKTtcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XG5jb25zdCBpbnB1dEJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9iaW8nKTtcbmNvbnN0IHByb2ZpbGVVc2VybmFtZSA9ICcucHJvZmlsZV9fdXNlcm5hbWUnO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gJy5wcm9maWxlX19kZXNjcmlwdGlvbic7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gJy5wcm9maWxlX19hdmF0YXInO1xuY29uc3QgcG9wdXBDb25maXJtID0gJyNwb3B1cC1jb25maXJtJztcbi8v0YHQvtC30LTQsNC90LjQtSDQv9C10YDQtdC80LXQvdC90YvRhSDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0YvRhSDQutCw0YDRgtC+0YfQtdC6XG5jb25zdCBpbnB1dFBsYWNlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9wbGFjZS1uYW1lJyk7XG5jb25zdCBpbnB1dFBsYWNlSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX3BsYWNlLWltZycpO1xuLy/RgdC+0LfQtNCw0L3QuNC1INC/0LXRgNC10LzQtdC90L3Ri9GFINC00LvRjyDQv9GA0L7RgdC80L7RgtGA0LAg0YTQvtGC0L7Qs9GA0LDRhNC40LlcbmNvbnN0IHBvcHVwSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbmNvbnN0IHBvcHVwSW1nQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nLWNhcHRpb24nKTtcbmNvbnN0IHNlY3Rpb25FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xuY29uc3QgZWxlbWVudHNUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbGVtZW50cycpLmNvbnRlbnQ7XG5jb25zdCBwb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwXCIpO1xuY29uc3QgcG9wdXBCaWdJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYmlnLWltZycpO1xuXG4vL9C/0L7QtNC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4XG5jb25zdCBmb3JtVmFsaWRQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBQcm9maWxlKTtcbmZvcm1WYWxpZFByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtVmFsaWRBZGQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEFkZCk7XG5mb3JtVmFsaWRBZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtVmFsaWRBdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEF2YXRhcik7XG5mb3JtVmFsaWRBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEJpZ0ltYWdlKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuY29uc3QgcG9wdXBDb25maXJtUmVtb3ZlID0gbmV3IFBvcHVwQ29uZmlybUZvcm0ocG9wdXBDb25maXJtLCB7XG4gIGhhbmRsZVN1Ym1pdDogKCkgPT4ge1xuXG4gIH1cbn0pO1xucG9wdXBDb25maXJtUmVtb3ZlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyB1c2VyTmFtZVNlbGVjdG9yOiBwcm9maWxlVXNlcm5hbWUsIHVzZXJCaW9TZWxlY3RvcjogcHJvZmlsZURlc2NyaXB0aW9uLCB1c2VyQXZhdGFyU2VsZWN0b3I6IHByb2ZpbGVBdmF0YXIgfSk7XG5cbi8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRj1xuY29uc3QgcG9wdXBDaGFuZ2VQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBQcm9maWxlLCB7XG4gIGhhbmRsZUZvcm1BZGQ6IChwcm9maWxlRGF0YSkgPT4ge1xuICAgIHBvcHVwQ2hhbmdlUHJvZmlsZS5zZXRMb2FkaW5nKCk7XG4gICAgYXBpLnNldFVzZXJJbmZvKHsgbmFtZTogcHJvZmlsZURhdGEudXNlcm5hbWUsIGFib3V0OiBwcm9maWxlRGF0YS51c2VyYmlvIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdC5uYW1lLCByZXN1bHQuYWJvdXQpO1xuICAgICAgICBwb3B1cENoYW5nZVByb2ZpbGUuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBDaGFuZ2VQcm9maWxlLnNldEdlbmVyYWwoKTtcbiAgICAgIH0pXG4gIH1cbn0pO1xucG9wdXBDaGFuZ2VQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0LfQsNCz0YDRg9C30LrQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0YEg0YHQtdGA0LLQtdGA0LBcbmFwaS5nZXRVc2VySW5mbygpXG4gIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQubmFtZSwgcmVzdWx0LmFib3V0LCByZXN1bHQuYXZhdGFyLCByZXN1bHQuX2lkKTtcbiAgICBwcm9maWxlQnV0dG9uQ2hhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBuYW1lLCBiaW8gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICAgICAgaW5wdXRCaW8udmFsdWUgPSBiaW87XG4gICAgICBwb3B1cENoYW5nZVByb2ZpbGUub3BlbigpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgICAgICBpdGVtOiBkYXRhLCBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEubmFtZSwgZGF0YS5saW5rKTtcbiAgICAgICAgfSwgaGFuZGxlVHJhc2hDbGljazogKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgcG9wdXBDb25maXJtUmVtb3ZlLm9wZW4oY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6IChjYWxsYmFjaykgPT4ge1xuXG4gICAgICAgIH0sIHVzZXJJbmZvOiB1c2VySW5mby5nZXRVc2VySW5mbygpLFxuICAgICAgfSwgJyNlbGVtZW50cycpO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9O1xuXG4gICAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICBpdGVtczogW10sXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XG4gICAgICB9XG4gICAgfSwgJy5lbGVtZW50cycpO1xuXG4gICAgLy/QtNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcbiAgICBjb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZCwge1xuICAgICAgaGFuZGxlRm9ybUFkZDogKGRhdGEpID0+IHtcbiAgICAgICAgcG9wdXBBZGRDYXJkLnNldExvYWRpbmcoKTtcbiAgICAgICAgYXBpLmNyZWF0ZUl0ZW0oeyBsaW5rOiBkYXRhLmxpbmssIG5hbWU6IGRhdGEubmFtZSB9KVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgcmVzdWx0IH0pXG4gICAgICAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChyZXN1bHQpO1xuICAgICAgICAgICAgY2FyZExpc3QuYWRkSXRlbShuZXdDYXJkKTtcbiAgICAgICAgICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgZXJyIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBwb3B1cEFkZENhcmQuc2V0R2VuZXJhbCgpO1xuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBwcm9maWxlQnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgZm9ybVZhbGlkQWRkLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgICAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjYXJkTGlzdC51cGRhdGVMaXN0KHJlc3VsdClcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbi8v0LjQt9C80LXQvdC40YLRjCDQsNCy0LDRgtCw0YBcbmNvbnN0IHBvcHVwQ2hhbmdlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBdmF0YXIsIHtcbiAgaGFuZGxlRm9ybUFkZDogKGRhdGEpID0+IHtcbiAgICBwb3B1cENoYW5nZUF2YXRhci5zZXRMb2FkaW5nKCk7XG4gICAgYXBpLnNldFVzZXJBdmF0YXIoeyBhdmF0YXI6IGRhdGEuYXZhdGFyIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoZGF0YS5hdmF0YXIpO1xuICAgICAgICBwb3B1cENoYW5nZUF2YXRhci5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cENoYW5nZUF2YXRhci5zZXRHZW5lcmFsKCk7XG4gICAgICB9KVxuICB9XG59KTtcbnBvcHVwQ2hhbmdlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVCdXR0b25BdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZEF2YXRhci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBDaGFuZ2VBdmF0YXIub3BlbigpO1xufSk7XG4iXSwibmFtZXMiOlsidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidHlwZUVycm9yIiwiQXBpIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJrZXkiLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaCIsImNvbmNhdCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0IiwibGluayIsImlkIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsIkNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiX2xpbmsiLCJpdGVtIiwiX25hbWUiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJ1c2VySW5mbyIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVUcmFzaENsaWNrIiwiaGFuZGxlVHJhc2hDbGljayIsIl9saWtlcyIsImxpa2VzIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfZWxlbWVudExpa2UiLCJxdWVyeVNlbGVjdG9yIiwiX2VsZW1lbnRUcmFzaCIsIl9lbGVtZW50SW1nIiwiX2VsZW1lbnRUaXRsZSIsIl9lbGVtZW50TGlrZUNvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9yZW1vdmVUcmFzaCIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlc1VzZXIiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfaGFzTXlMaWtlIiwiYXBpIiwicmVtb3ZlIiwiX3RoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xpa2UiLCJfdHJhc2giLCJiaW5kIiwiYWRkIiwiX3RoaXMyIiwic29tZSIsInVzZXIiLCJfYWRkTGlrZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9pdGVtcyIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0IiwiY2xvc2UiLCJfcG9wdXAiLCJfYnV0dG9uQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfaW1nIiwiX3RpdGxlIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtQWRkIiwiX2hhbmRsZUZvcm1BZGQiLCJfZm9ybSIsIl9pbnB1dHMiLCJfc3VibWl0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInJlc2V0IiwiX3RoaXMzIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VyQmlvU2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckJpbyIsIl91c2VyQXZhdGFyIiwiYmlvIiwic2V0VXNlckF2YXRhciIsIlBvcHVwQ29uZmlybUZvcm0iLCJoYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0IiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsIl9zYXZlIiwidW5kZWZpbmVkIiwiZXZlbnQiLCJwb3B1cEFkZCIsInBvcHVwUHJvZmlsZSIsInBvcHVwQXZhdGFyIiwicHJvZmlsZUJ1dHRvbkNoYW5nZSIsInByb2ZpbGVCdXR0b25BZGQiLCJwcm9maWxlQnV0dG9uQXZhdGFyIiwiaW5wdXROYW1lIiwiaW5wdXRCaW8iLCJlbmFibGVWYWxpZGF0aW9uIiwiZm9ybVZhbGlkQWRkIiwiZm9ybVZhbGlkQXZhdGFyIiwicG9wdXBXaXRoSW1hZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwQ29uZmlybVJlbW92ZSIsInBvcHVwQ2hhbmdlUHJvZmlsZSIsInByb2ZpbGVEYXRhIiwic2V0TG9hZGluZyIsInVzZXJuYW1lIiwidXNlcmJpbyIsInJlc3VsdCIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJmaW5hbGx5Iiwic2V0R2VuZXJhbCIsIl91c2VySW5mbyRnZXRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwib3BlbiIsImNyZWF0ZUNhcmQiLCJjYWxsYmFjayIsImhhbmRsZUxpa2VDbGljayIsImNhcmRMaXN0IiwibmV3Q2FyZCIsImFkZEl0ZW0iLCJwb3B1cEFkZENhcmQiLCJyZXNldFZhbGlkYXRpb24iLCJ1cGRhdGVMaXN0IiwicG9wdXBDaGFuZ2VBdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9